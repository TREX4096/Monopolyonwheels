(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[148],{4514:(e,t,s)=>{Promise.resolve().then(s.bind(s,56492))},56492:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var i=s(57437),a=s(38472),n=s(2265),l=s(16463),r=s(98174);let o=[{id:1,scenario:"Pursue Higher Education",easy:"Skip higher education",tough:"Enroll in a Master's program",spinCommitment:3,careerPoints:6,emoji:"\uD83C\uDF93"},{id:2,scenario:"Start a New Business",easy:"Work for a stable job",tough:"Launch a startup with risks",spinCommitment:4,careerPoints:8,emoji:"\uD83D\uDCBC"},{id:3,scenario:"Relocate for a Job Opportunity",easy:"Stay in the current city",tough:"Move to a new city for a better role",spinCommitment:2,careerPoints:4,emoji:"\uD83C\uDFE2"},{id:4,scenario:"Invest in Skill Development",easy:"Stick with current skills",tough:"Enroll in an intensive course",spinCommitment:3,careerPoints:6,emoji:"\uD83D\uDCDA"},{id:5,scenario:"Work-Life Balance",easy:"Prioritize work-life balance",tough:"Take on a challenging project with longer hours",spinCommitment:2,careerPoints:4,emoji:"⚖️"},{id:6,scenario:"Career Change",easy:"Stay in the current field",tough:"Switch to a new industry",spinCommitment:4,careerPoints:8,emoji:"\uD83D\uDD04"},{id:7,scenario:"Leadership Role",easy:"Continue as a team member",tough:"Accept a leadership role",spinCommitment:3,careerPoints:6,emoji:"\uD83D\uDC65"},{id:8,scenario:"Pursue an International Internship",easy:"Choose a local opportunity",tough:"Apply for a competitive international internship",spinCommitment:5,careerPoints:10,emoji:"\uD83C\uDF0D"},{id:9,scenario:"Financial Investment",easy:"Save money in a regular account",tough:"Invest in stocks or mutual funds",spinCommitment:2,careerPoints:4,emoji:"\uD83D\uDCB0"},{id:10,scenario:"Community Service",easy:"Focus solely on career",tough:"Volunteer for a cause",spinCommitment:1,careerPoints:2,emoji:"\uD83E\uDD1D"}],c=()=>{var e;let t=(0,l.useRouter)(),s=(0,n.useRef)(null),{data:c,status:d}=(0,r.kP)(),[u,h]=(0,n.useState)(void 0),[m,x]=(0,n.useState)("en"),[p,f]=(0,n.useState)(0),[b,g]=(0,n.useState)(void 0),[v,j]=(0,n.useState)(void 0),[y,w]=(0,n.useState)(null),[k,N]=(0,n.useState)(!1),[C,F]=(0,n.useState)(0),[P,S]=(0,n.useState)(!1),[M]=(0,n.useState)([{id:1,spins:10,title:"Task 1",path:"/api/user/survey1"},{id:2,spins:10,title:"Task 2",path:"/api/user/survey2"}]),E=e=>{let t=window.devicePixelRatio||1,s=e.getBoundingClientRect();e.width=s.width*t,e.height=s.height*t;let i=e.getContext("2d");return i?(i.scale(t,t),e.style.width="".concat(s.width,"px"),e.style.height="".concat(s.height,"px"),i):null},R=()=>{let e=s.current;if(!e)return;let t=E(e);if(!t)return;let i=e.getBoundingClientRect(),a=i.width,n=i.height,l=Math.min(a,n)/2.2,r=2*Math.PI/o.length;t.clearRect(0,0,a,n),t.save(),t.translate(a/2,n/2),t.rotate(C),t.beginPath(),t.arc(0,0,l,0,2*Math.PI),t.strokeStyle="#FFD700",t.lineWidth=15,t.stroke(),o.forEach((e,s)=>{let i=s*r;t.beginPath(),t.moveTo(0,0),t.arc(0,0,l-2,i,(s+1)*r),t.fillStyle=s%2==0?"#FFFFFF":"#DC2626",t.fill(),t.strokeStyle="#FFFFFF",t.lineWidth=2,t.stroke(),t.save(),t.rotate(i+r/2),t.textAlign="center",t.textBaseline="middle",t.fillStyle=s%2==0?"#000000":"#FFFFFF",t.font="32px sans-serif",t.fillText(e.emoji,l-50,0),t.restore()}),t.beginPath(),t.arc(0,0,15,0,2*Math.PI),t.fillStyle="#FFD700",t.fill(),t.strokeStyle="#FFFFFF",t.lineWidth=2,t.stroke(),t.restore()},D=()=>{let e=s.current;if(!e)return;let t=e.getContext("2d");if(!t)return;let i=e.getBoundingClientRect().width;t.save(),t.translate(i/2,20),t.beginPath(),t.moveTo(-15,0),t.lineTo(15,0),t.lineTo(0,30),t.closePath(),t.fillStyle="#FFD700",t.fill(),t.strokeStyle="#FFFFFF",t.lineWidth=2,t.stroke(),t.restore()},I=async e=>{var t;if(!(null==c?void 0:null===(t=c.user)||void 0===t?void 0:t.id)||!y)return;let s=e?y.careerPoints:0,i=e?y.spinCommitment+1:1;try{await a.Z.post("".concat("https://spin-the-wheel-backend.onrender.com","/user/updatePoints/").concat(c.user.id),{points:s,spinUpdate:-i});let e=await a.Z.get("".concat("https://spin-the-wheel-backend.onrender.com","/user/leaderboard/").concat(c.user.id,"/").concat("4a8e0f7b-77cb-4c01-a436-fcc1ee22d5a1"));h(e.data),f(e.data.user.points),g(e.data.user.spinLeft),w(null)}catch(e){console.error("Error handling choice:",e)}},B=(e,s)=>{s.stopPropagation(),S(!1),t.push(e)};return(0,n.useEffect)(()=>{var e;(null==c?void 0:null===(e=c.user)||void 0===e?void 0:e.id)&&a.Z.get("".concat("https://spin-the-wheel-backend.onrender.com","/user/leaderboard/").concat(c.user.id,"/").concat("4a8e0f7b-77cb-4c01-a436-fcc1ee22d5a1")).then(e=>{var t,s;h(e.data),g(e.data.user.spinLeft),f(e.data.user.points),j(null===(s=e.data)||void 0===s?void 0:null===(t=s.user)||void 0===t?void 0:t.rank)}).catch(e=>{console.error("Error fetching details:",e)})},[c]),(0,n.useEffect)(()=>{let e=s.current;e&&(e.width=800,e.height=800,R(),D())},[C]),(0,n.useEffect)(()=>{let e=new Audio("/tick.mp3");return k?e.play():e.pause(),()=>{e.pause()}},[k]),(0,i.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-100 via-purple-100 to-pink-100 p-4",children:(0,i.jsxs)("div",{className:"max-w-md mx-auto",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,i.jsx)("h1",{className:"text-3xl font-bold text-black",children:"Career Decision Game"}),(0,i.jsxs)("div",{className:"bg-white/30 backdrop-blur-sm rounded-full p-1 flex items-center",children:[(0,i.jsx)("button",{onClick:()=>x("en"),className:"px-3 py-1 rounded-full text-gray-800 text-sm ".concat("en"===m?"bg-white":""),children:"En"}),(0,i.jsx)("button",{onClick:()=>x("ar"),className:"px-3 py-1 rounded-full text-gray-800 text-sm ".concat("ar"===m?"bg-white":""),children:"عربي"})]})]}),(0,i.jsxs)("div",{className:"bg-white/20 backdrop-blur-sm rounded-3xl p-6 shadow-lg mb-8",children:[(0,i.jsxs)("div",{className:"flex justify-between mb-6",children:[(0,i.jsxs)("div",{className:"space-y-1",children:[(0,i.jsxs)("div",{className:"text-xl font-bold",children:["Global Rank: ",v]}),(0,i.jsxs)("div",{className:"text-xl font-bold",children:["Career points: ",p]})]}),(0,i.jsxs)("div",{className:"text-xl font-bold",children:["Spin: ",b]})]}),(0,i.jsxs)("div",{className:"relative mb-6 aspect-square",children:[(0,i.jsx)("div",{className:"absolute top-0 left-1/2 transform -translate-x-1/2 text-4xl",children:(0,i.jsx)("span",{role:"img","aria-label":"pointer",children:"\uD83D\uDCCD"})}),(0,i.jsx)("canvas",{ref:s,width:300,height:300,className:"w-full h-full",style:{transition:k?"none":"transform 0.3s ease-out"}})]}),(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsx)("button",{onClick:()=>{if(k||0>=(b||0))return;N(!0);let e=Date.now(),t=2*Math.PI*(4+4*Math.random()),s=()=>{let i=Math.min(1,(Date.now()-e)/3e3),a=C+t*(1-Math.pow(1-i,3));if(F(a),i<1)requestAnimationFrame(s);else{N(!1);let e=Math.floor(a%(2*Math.PI)/(2*Math.PI)*o.length);w(o[o.length-1-e])}};requestAnimationFrame(s)},disabled:k||0>=(b||0),className:"w-full bg-yellow-300 hover:bg-yellow-400 text-black font-bold py-3 px-6 rounded-full disabled:opacity-50",children:"Click to spin"}),(0,i.jsx)("button",{onClick:()=>S(!0),className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-full",children:"Click to get more spins"})]})]}),(0,i.jsxs)("div",{className:"mt-8",children:[(0,i.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"Leader Board"}),(0,i.jsx)("div",{className:"flex justify-center items-end space-x-8",children:null==u?void 0:null===(e=u.leaderBoard)||void 0===e?void 0:e.map((e,t)=>e&&(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("div",{className:"".concat(t+1===1?"w-24 h-24":"w-20 h-20"," bg-gray-200 rounded-full flex items-center justify-center mb-2"),children:(0,i.jsxs)("div",{className:"".concat(t+1===1?"text-2xl":"text-xl"," font-bold"),children:["#",t+1]})}),(0,i.jsx)("div",{className:"font-semibold",children:e.name})]},t))})]}),y&&(0,i.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4",children:(0,i.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[(0,i.jsx)("h3",{className:"text-lg font-bold mb-4",children:y.scenario}),(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsx)("button",{onClick:()=>{I(!1)},className:"w-full bg-gray-100 hover:bg-gray-200 text-black font-semibold py-2 px-4 rounded",children:y.easy}),(0,i.jsxs)("button",{onClick:()=>{I(!0)},className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded",children:[y.tough,(0,i.jsxs)("div",{className:"flex flex-row gap-2 items-center justify-center",children:[(0,i.jsxs)("span",{className:"text-sm ml-2",children:["(+",y.careerPoints," pts)"]}),(0,i.jsxs)("span",{className:"text-sm ml-2",children:["(- ","".concat(y.spinCommitment+1)," spin)"]})]})]})]})]})}),P&&(0,i.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4",onClick:()=>S(!1),children:(0,i.jsxs)("div",{className:"bg-white rounded-2xl p-6 max-w-md w-full shadow-xl",onClick:e=>e.stopPropagation(),children:[(0,i.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,i.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"Get More Spins"}),(0,i.jsx)("button",{onClick:e=>{e.stopPropagation(),S(!1)},className:"text-gray-400 hover:text-gray-600 text-2xl font-bold",children:"\xd7"})]}),(0,i.jsx)("div",{className:"grid grid-cols-2 gap-4",children:M.map(e=>(0,i.jsxs)("div",{onClick:t=>B(e.path,t),className:"bg-blue-50 rounded-xl p-4 border border-blue-200 hover:border-blue-400 transition-colors cursor-pointer shadow-sm hover:shadow-md",children:[(0,i.jsxs)("div",{className:"relative flex flex-col items-center",children:[(0,i.jsx)("img",{src:"/dollar-bag.svg",alt:"",className:"h-16 w-16 mb-2"}),(0,i.jsx)("span",{className:"text-green-700 font-bold",children:e.spins})]}),(0,i.jsxs)("div",{className:"text-center text-gray-700 font-medium",children:[e.title,": ",e.spins," spins"]})]},e.id))})]})})]})})}},16463:(e,t,s)=>{"use strict";var i=s(71169);s.o(i,"useRouter")&&s.d(t,{useRouter:function(){return i.useRouter}})}},e=>{var t=t=>e(e.s=t);e.O(0,[472,174,130,184,744],()=>t(4514)),_N_E=e.O()}]);