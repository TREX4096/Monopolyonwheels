(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{9578:(e,r,a)=>{Promise.resolve().then(a.bind(a,15207))},15207:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>n});var s=a(57437),l=a(2265),t=a(98174),o=a(38472);function n(){let[e,r]=(0,l.useState)(!1),[a,n]=(0,l.useState)(!1),[i,d]=(0,l.useState)(!1),[u,c]=(0,l.useState)(""),[g,m]=(0,l.useState)({name:"",email:"",password:"",secretKey:"",gender:"",age:"",otp:""}),p=()=>Math.floor(1e5+9e5*Math.random()).toString(),h=async e=>{e.preventDefault(),sessionStorage.removeItem("userOTP"),sessionStorage.removeItem("userEmail");let r=p();sessionStorage.setItem("userOTP",r),sessionStorage.setItem("userEmail",g.email);try{await o.Z.post("".concat("https://spin-the-wheel-backend.onrender.com","/user/sendotp"),{email:g.email,otp:r}),d(!0),n(!0),c("")}catch(e){console.error("Error sending OTP:",e),alert("Failed to send OTP. Please try again."),c("An error occurred while sending the OTP.")}},b=()=>{let e=sessionStorage.getItem("userOTP"),r=sessionStorage.getItem("userEmail");return e&&r?r!==g.email?(c("Email mismatch. Please start over."),!1):g.otp===e?(sessionStorage.removeItem("userOTP"),sessionStorage.removeItem("userEmail"),!0):(c("Invalid OTP. Please try again."),!1):(c("OTP expired. Please request a new one."),!1)},f=async r=>{if(r.preventDefault(),e)await (0,t.zB)("admin-login",{secretKey:g.secretKey,email:g.email,password:g.password,redirect:!0,callbackUrl:"/api/admin/dashboard"});else{if(!i){h(r);return}b()&&await (0,t.zB)("user-registration",{name:g.name,email:g.email,gender:g.gender,age:g.age,redirect:!0,callbackUrl:"/api/user/hello"})}};return(0,l.useEffect)(()=>()=>{sessionStorage.removeItem("userOTP"),sessionStorage.removeItem("userEmail")},[e]),(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-100 via-purple-100 to-pink-100 flex items-center justify-center px-4",children:(0,s.jsxs)("div",{className:"w-full max-w-md space-y-8 relative",children:[(0,s.jsx)("div",{className:"text-center",children:(0,s.jsx)("h1",{className:"text-4xl font-bold mb-8",children:"Sign up to play"})}),!e&&(0,s.jsxs)("button",{onClick:()=>{(0,t.zB)("google",{callbackUrl:"/api/user/hello"})},className:"w-full flex items-center justify-center space-x-2 p-3 rounded-full bg-white shadow-md hover:shadow-lg transition-shadow",children:[(0,s.jsxs)("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",children:[(0,s.jsx)("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),(0,s.jsx)("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),(0,s.jsx)("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),(0,s.jsx)("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),(0,s.jsx)("span",{className:"text-gray-700 font-medium",children:"Sign up with Google"})]}),(0,s.jsxs)("div",{className:"relative flex items-center justify-center my-8",children:[(0,s.jsx)("div",{className:"border-t border-gray-300 w-full"}),(0,s.jsx)("span",{className:"bg-transparent px-4 text-gray-500",children:"or"}),(0,s.jsx)("div",{className:"border-t border-gray-300 w-full"})]}),(0,s.jsxs)("form",{onSubmit:f,className:"space-y-4",children:[e?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("input",{type:"email",placeholder:"Admin Email",value:g.email,onChange:e=>m({...g,email:e.target.value}),className:"w-full p-3 rounded-lg bg-white/50 backdrop-blur-sm border border-gray-200 focus:ring-2 focus:ring-purple-400 outline-none",required:!0}),(0,s.jsx)("input",{type:"password",placeholder:"Admin Password",value:g.password,onChange:e=>m({...g,password:e.target.value}),className:"w-full p-3 rounded-lg bg-white/50 backdrop-blur-sm border border-gray-200 focus:ring-2 focus:ring-purple-400 outline-none",required:!0}),(0,s.jsx)("input",{type:"password",placeholder:"Secret Key",value:g.secretKey,onChange:e=>m({...g,secretKey:e.target.value}),className:"w-full p-3 rounded-lg bg-white/50 backdrop-blur-sm border border-gray-200 focus:ring-2 focus:ring-purple-400 outline-none",required:!0})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("input",{type:"text",placeholder:"Game Name",value:g.name,onChange:e=>m({...g,name:e.target.value}),className:"w-full p-3 rounded-lg bg-white/50 backdrop-blur-sm border border-gray-200 focus:ring-2 focus:ring-purple-400 outline-none",required:!0}),(0,s.jsx)("input",{type:"email",placeholder:"name@domain.com",value:g.email,onChange:e=>m({...g,email:e.target.value}),className:"w-full p-3 rounded-lg bg-white/50 backdrop-blur-sm border border-gray-200 focus:ring-2 focus:ring-purple-400 outline-none",required:!0}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsx)("input",{type:"number",placeholder:"Age",value:g.age,onChange:e=>m({...g,age:e.target.value}),className:"w-full p-3 rounded-lg bg-white/50 backdrop-blur-sm border border-gray-200 focus:ring-2 focus:ring-purple-400 outline-none",required:!0}),(0,s.jsxs)("select",{"aria-label":"Choose an option",value:g.gender,onChange:e=>m({...g,gender:e.target.value}),className:"w-full p-3 rounded-lg bg-white/50 backdrop-blur-sm border border-gray-200 focus:ring-2 focus:ring-purple-400 outline-none",required:!0,children:[(0,s.jsx)("option",{value:"",children:"Gender"}),(0,s.jsx)("option",{value:"M",children:"Male"}),(0,s.jsx)("option",{value:"F",children:"Female"}),(0,s.jsx)("option",{value:"Others",children:"Others"})]})]}),a&&(0,s.jsx)("input",{type:"text",placeholder:"Enter OTP",value:g.otp,onChange:e=>m({...g,otp:e.target.value}),className:"w-full p-3 rounded-lg bg-white/50 backdrop-blur-sm border border-gray-200 focus:ring-2 focus:ring-purple-400 outline-none",maxLength:6,required:!0})]}),(0,s.jsx)("button",{type:"submit",className:"w-full p-3 rounded-full bg-gradient-to-r from-purple-500 to-pink-500 text-white font-medium shadow-lg hover:shadow-xl transition-shadow",children:e?"Login as Admin":i?"Verify & Sign up":"Sign up"})]}),u&&(0,s.jsx)("div",{className:"mt-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded-lg",children:u}),(0,s.jsx)("button",{onClick:()=>r(!e),className:"absolute bottom-[-48px] left-1/2 transform -translate-x-1/2 text-sm text-gray-500 hover:text-gray-700",children:e?"Switch to User Signup":"Admin Login"})]})})}}},e=>{var r=r=>e(e.s=r);e.O(0,[472,174,130,184,744],()=>r(9578)),_N_E=e.O()}]);